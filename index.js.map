{"version":3,"file":"./index.js","mappings":"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","sources":["webpack://chat-main/./src/styles.css?1553","webpack://chat-main/./src/api.ts","webpack://chat-main/./src/components/login-component.ts","webpack://chat-main/webpack/bootstrap","webpack://chat-main/webpack/runtime/define property getters","webpack://chat-main/webpack/runtime/hasOwnProperty shorthand","webpack://chat-main/webpack/runtime/make namespace object","webpack://chat-main/./src/script.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","const host: string = 'https://wedev-api.sky.pro/api/v2/alexeirybak14/comments'\n\nexport async function getApiComments({ token }: { token: string }) {\n    return fetch(host, {\n        method: 'GET',\n        headers: {\n            Authorization: token,\n        },\n    }).then((response) => {\n        if (response.status === 401) {\n            throw new Error('Нет авторизации')\n        }\n        if (response.status === 500) {\n            throw new Error('Сервер сломался, попробуйте позже')\n        }\n        return response.json()\n    })\n}\n\nexport async function addApiComments({ text, token }: { text: string, token: string }) {\n    return fetch(host, {\n        method: 'POST',\n        body: JSON.stringify({\n            text,\n        }),\n        headers: {\n            Authorization: token,\n        },\n    }).then((response) => {\n        if (response.status === 400) {\n            throw new Error('Комментарий должен быть не короче 3 символов')\n        }\n        if (response.status === 500) {\n            throw new Error('Сервер сломался, попробуй позже')\n        }\n        return response.json()\n    })\n}\n\nexport async function answerApiComments({ text, token }: { text: string, token: string }) {\n    return fetch(host, {\n        method: 'POST',\n        body: JSON.stringify({\n            text: `Отредактировал(а): ${text}`.replace(\n                /Отредактировал(а): Отредактировал(а):/g,\n                'Отредактировал(а):',\n            ),\n        }),\n        headers: {\n            Authorization: token,\n        },\n    }).then((response) => {\n        if (response.status === 400) {\n            throw new Error('Комментарий должен быть не короче 3 символов')\n        }\n        if (response.status === 500) {\n            throw new Error('Сервер сломался, попробуй позже')\n        }\n        return response.json()\n    })\n}\n\nexport async function loginUser({ login, password }: { login: string, password: string }) {\n    return fetch('https://wedev-api.sky.pro/api/user/login', {\n        method: 'POST',\n        body: JSON.stringify({\n            login,\n            password,\n        }),\n    }).then((response) => {\n        if (response.status === 400) {\n            throw new Error('Неверный логин или пароль')\n        }\n        return response.json()\n    })\n}\n\nexport async function regUser({ login, password, name }: { login: string, password: string, name: string }) {\n    return fetch('https://wedev-api.sky.pro/api/user', {\n        method: 'POST',\n        body: JSON.stringify({\n            login,\n            password,\n            name,\n        }),\n    }).then((response) => {\n        if (response.status === 400) {\n            throw new Error('Такой пользователь уже существует')\n        }\n        return response.json()\n    })\n}\n\nexport function deleteApiComments(id: number, token: string) {\n    return fetch(`${host}/${id}`, {\n        method: 'DELETE',\n        headers: {\n            Authorization: token,\n        },\n    })\n}\n\nexport async function addLike(token: string, id: number) {\n    return fetch(`${host}/${id}/toggle-like`, {\n        method: 'POST',\n        headers: {\n            Authorization: token,\n        },\n    }).then((response) => {\n        return response.json()\n    })\n}\n","import { loginUser, regUser } from '../api';\nexport let name: string;\nexport let userName = {};\n\nexport function renderLogin({\n    appEl,\n    setToken,\n    getComments,\n}: {\n    appEl: HTMLElement;\n    setToken: Function;\n    getComments: Function;\n}) {\n    let isLoginMode = true;\n    const renderForm = () => {\n        const appHtml = `<div class=\"login-form\">\n                        <h3>Форма ${isLoginMode ? 'входа' : 'регистрации'}</h3>\n                        ${\n                            isLoginMode\n                                ? ''\n                                : `\n                        <input type=\"text\" id=\"name-input\" class=\"form-login\" placeholder=\"Введите имя\"/>`\n                        }\n                        <input type=\"text\" id=\"login-input\" class=\"form-login\" placeholder=\"Введите логин\"/>\n                        <input type=\"password\" id=\"password-input\" class=\"form-password\" placeholder=\"Введите пароль\"/>\n                        \n                        <button class=\"login-form-button\" id=\"login-button\">${\n                            isLoginMode ? 'Войти' : 'Перейти к регистрации'\n                        }</button>\n                  \n                          <button class=\"login-button\" id=\"toggle-button\">${\n                              isLoginMode ? 'Перейти к регистрации' : 'Войти'\n                          }</button>`;\n\n        appEl.innerHTML = appHtml;\n\n        const loginButton = document.getElementById('login-button');\n\n        if (loginButton) {\n            loginButton.addEventListener('click', () => {\n                if (isLoginMode) {\n                    const login = document.getElementById(\n                        'login-input',\n                    ) as HTMLInputElement;\n                    const password = document.getElementById(\n                        'password-input',\n                    ) as HTMLInputElement;\n\n                    login?.classList.remove('error');\n\n                    if (login?.value == '') {\n                        login.classList.add('error');\n                        return;\n                    }\n\n                    password.classList.remove('error');\n\n                    if (password.value == '') {\n                        password.classList.add('error');\n                        return;\n                    }\n\n                    loginUser({\n                        login: login.value,\n                        password: password.value,\n                    })\n                        .then((user) => {\n                            setToken(`Bearer ${user.user.token}`);\n                            userName = user.user.name;\n                            getComments();\n                        })\n                        .catch((error) => {\n                            alert(error.message);\n                        });\n                } else {\n                    const login = document.getElementById(\n                        'login-input',\n                    ) as HTMLInputElement;\n                    const password = document.getElementById(\n                        'password-input',\n                    ) as HTMLInputElement;\n                    const name = document.getElementById(\n                        'name-input',\n                    ) as HTMLInputElement;\n\n                    login.classList.remove('error');\n\n                    if (login.value == '') {\n                        login.classList.add('error');\n                        return;\n                    }\n\n                    password.classList.remove('error');\n\n                    if (password.value == '') {\n                        password.classList.add('error');\n                        return;\n                    }\n\n                    name.classList.remove('error');\n\n                    if (name.value == '') {\n                        name.classList.add('error');\n                        return;\n                    }\n                    regUser({\n                        login: login.value,\n                        password: password.value,\n                        name: name.value,\n                    })\n                        .then((user) => {\n                            setToken(`Bearer ${user.user.token}`);\n                            userName = user.user.name;\n                            getComments();\n                        })\n                        .catch((error) => {\n                            alert(error.message);\n                        });\n                }\n            });\n        } else {\n            console.error('Элемент с id \"login-button\" не найден');\n        }\n\n        const toggleButton = document.getElementById(\n            'toggle-button',\n        ) as HTMLElement;\n\n        if (toggleButton) {\n            toggleButton.addEventListener('click', () => {\n                isLoginMode = !isLoginMode;\n                renderForm();\n            });\n        }\n    };\n\n    renderForm();\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './styles.css';\n\nimport {\n    addApiComments,\n    getApiComments,\n    answerApiComments,\n    deleteApiComments,\n    addLike,\n} from './api';\nimport { renderLogin, userName } from './components/login-component';\n\nlet token: string = ``;\nlet comments: Comment[] = [];\nlet initialLoading = true;\nlet isLoadingAdd = false;\ninterface Comment {\n    date: string;\n    author: {\n        name: string;\n    };\n    name: string;\n    id: number;\n    text: string;\n    likes: number;\n    isLiked: boolean;\n    isLikeLoading: boolean;\n    index: number;\n}\n\nexport const getComments = async () => {\n    if (initialLoading) {\n        let loaderElement: HTMLElement | null = document.getElementById('app');\n        if (loaderElement) {\n            loaderElement.innerHTML = `<div class=\"preloader\">\n  <div class=\"preloader-image\">Приложение загружается</div></div>`;\n        }\n    }\n    return getApiComments({ token }).then((responseData) => {\n        const appComments = responseData.comments.map((comment: Comment) => {\n            return {\n                date: new Date(comment.date),\n                name: comment.author.name,\n                id: comment.id,\n                text: comment.text,\n                likes: comment.likes,\n                isLiked: comment.isLiked,\n                isLikeLoading: false,\n            };\n        });\n        comments = appComments;\n        initialLoading = false;\n        renderComments();\n    });\n};\n\ngetComments();\n\nfunction formatDate(date: Date) {\n    const year = date.getFullYear().toString().slice(-2);\n    const month = ('0' + (date.getMonth() + 1)).slice(-2);\n    const day = ('0' + date.getDate()).slice(-2);\n    const hours = ('0' + date.getHours()).slice(-2);\n    const minutes = ('0' + date.getMinutes()).slice(-2);\n    return `${day}.${month}.${year} ${hours}:${minutes}`;\n}\n\nconst sanitizeHtml = (htmlString: string) => {\n    return htmlString\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/QUOTE_BEGIN/g, '<div class=\"quote\">')\n        .replace(/QUOTE_END/g, '</div>');\n};\n\nconst renderComments = () => {\n    const appEl = document.getElementById('app');\n    const commentHTML = comments\n        .map((comment: Comment, index: number) => {\n            return `<li data-index=\"${index}\" class=\"comment\">\n          <div class=\"comment-header\">\n            <div class=\"comment-name\">${sanitizeHtml(comment.name)}</div>\n            <div>${formatDate(new Date(comment.date))}</div>\n          </div>\n          <div class=\"comment-body\">\n            <div class=\"comment-text\">${sanitizeHtml(comment.text)}</div>\n          </div>\n          <div class=\"comment-footer\">\n          <button data-edit=\"${index}\" class=\"edit-button\">Редактировать</button>\n          <button data-id=\"${index}\" class=\"delete-button\" id=\"button-delete\">Удалить</button>\n            <div class=\"likes\">\n            <span class=\"likes-counter\">${comment.likes}</span>\n          <button data-id=\"${\n              comment.id\n          }\" data-index=\"${index}\" class=\"like-button ${\n              comment.isLiked ? '-active-like' : '-non-active-like'\n          } ${\n              comment.isLikeLoading ? '-loading-like' : ''\n          }\"></button></div></div>\n          </li>`;\n        })\n        .join('');\n\n    if (!token) {\n        const appHtml: string = `<ul class=\"comments\">\n                ${commentHTML}\n                </ul>\n                <p class=\"warning\">Чтобы добавить комментарий, <button class=\"login-button\">авторизуйтесь</button></p>`;\n        if (appEl) {\n            appEl.innerHTML = appHtml;\n        }\n\n        const loginButton = document.querySelector('.login-button');\n        if (loginButton) {\n            loginButton.addEventListener('click', () => {\n                if (appEl) {\n                    renderLogin({\n                        appEl,\n                        setToken: (newToken: string) => {\n                            token = newToken;\n                        },\n                        getComments,\n                    });\n                }\n            });\n        }\n        return;\n    }\n\n    const appHtml = `<ul class=\"comments\">\n                ${commentHTML}\n                </ul>\n                <div class=\"add-form-row\">\n                </div>\n                <div class=\"add-form\" id=\"add-comment\">\n                  <input\n                    type=\"text\"\n                    class=\"add-form-name\"\n                    placeholder=\"Введите ваше имя\"\n                    disabled\n                    value=\"${userName}\"\n                    id=\"name-input\"\n                    disabled/>\n                  <textarea\n                    type=\"textarea\"\n                    class=\"add-form-text\"\n                    placeholder=\"Введите ваш комментарий\"\n                    rows=\"4\"\n                    id=\"text-input\"\n                  ></textarea>\n                  <div class=\"add-form-row\">\n                    <button class=\"add-form-button\" id=\"button-add\">Написать</button>\n                  </div>\n                </div>\n                <div class=\"preloader\">\n                  <div id=\"form-loading\" class=\"hidden\">Комментарий загружается</div>\n                </div>`;\n\n    if (appEl) {\n        appEl.innerHTML = appHtml;\n    }\n\n    const nameInputElement: HTMLInputElement | null = document.getElementById(\n        'name-input',\n    ) as HTMLInputElement;\n    const textInputElement: HTMLInputElement | null = document.getElementById(\n        'text-input',\n    ) as HTMLInputElement;\n    const buttonElement: HTMLButtonElement | null = document.getElementById(\n        'button-add',\n    ) as HTMLButtonElement;\n\n    if (buttonElement) {\n        buttonElement.classList.add('empty');\n        buttonElement.disabled = true;\n    }\n\n    const loadingElement = document.getElementById('form-loading');\n    if (loadingElement) {\n        loadingElement.classList.add('preloader-image');\n    }\n\n    function answerComment() {\n        const oldComments = document.querySelectorAll('.comment');\n        oldComments.forEach((oldComment) => {\n            oldComment.addEventListener('click', (event) => {\n                event.stopPropagation();\n                const index = (oldComment as HTMLElement).dataset.index;\n                if (index !== undefined && textInputElement) {\n                    const commentIndex = Number(index);\n                    textInputElement.value = `QUOTE_BEGIN ${comments[commentIndex].text}\\n${comments[commentIndex].name} QUOTE_END`;\n                }\n            });\n        });\n    }\n\n    const deleteButtonElements = document.querySelectorAll('.delete-button');\n    deleteButtonElements.forEach((deleteButtonElement) => {\n        deleteButtonElement.addEventListener('click', (event) => {\n            event.stopPropagation();\n            const index = (deleteButtonElement as HTMLElement).dataset.id;\n            if (index) {\n                const commentIndex = Number(index);\n                deleteApiComments(comments[commentIndex].id, token).then(() => {\n                    return getComments();\n                });\n            }\n        });\n    });\n\n    const addComment = () => {\n        isLoadingAdd = true;\n        renderForm(isLoadingAdd);\n\n        if (textInputElement) {\n            addApiComments({\n                text: sanitizeHtml(textInputElement.value),\n                token,\n            })\n                .then(() => {\n                    return getComments();\n                })\n                .then(() => {\n                    isLoadingAdd = false;\n                    renderForm(isLoadingAdd);\n                    if (nameInputElement && textInputElement && buttonElement) {\n                        nameInputElement.value = '';\n                        textInputElement.value = '';\n                        buttonElement.classList.add('empty');\n                        buttonElement.disabled = true;\n                    }\n                })\n                .catch((error) => {\n                    isLoadingAdd = false;\n                    renderForm(isLoadingAdd);\n                    alert(error.message);\n                });\n        } else {\n            console.error('textInputElement is null');\n        }\n    };\n\n    const handleInput = () => {\n        if (nameInputElement && textInputElement && buttonElement) {\n            if (\n                nameInputElement.value.trim() !== '' &&\n                textInputElement.value.trim() !== ''\n            ) {\n                buttonElement.disabled = false;\n                buttonElement.classList.remove('empty');\n            } else {\n                buttonElement.disabled = true;\n                buttonElement.classList.add('empty');\n            }\n        }\n    };\n\n    if (nameInputElement && textInputElement && buttonElement) {\n        nameInputElement.addEventListener('input', handleInput);\n        textInputElement.addEventListener('input', handleInput);\n        buttonElement.addEventListener('click', addComment);\n        textInputElement.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') {\n                addComment();\n            }\n        });\n    }\n\n    counterLikes();\n    answerComment();\n\n    const editButtonElements = document.querySelectorAll('.edit-button');\n    editButtonElements.forEach((editButtonElement) => {\n        editButtonElement.addEventListener('click', (event) => {\n            event.stopPropagation();\n            const index = parseInt(\n                (editButtonElement as HTMLElement).dataset.edit ?? '',\n            );\n            if (!isNaN(index)) {\n                if (editButtonElements[index].innerHTML === 'Редактировать') {\n                    editButtonElements[index].innerHTML = 'Сохранить';\n                    const commentBodyElements =\n                        document.querySelectorAll('.comment-text');\n                    const commentBodyElement = commentBodyElements[index];\n                    commentBodyElement.innerHTML = `<textarea type=\"textarea\" class=\"edit-comment\" rows=\"4\">${comments[index].text}</textarea>`;\n                } else {\n                    const redactCommentElement = document.querySelectorAll(\n                        '.edit-comment',\n                    ) as NodeListOf<HTMLTextAreaElement>;\n                    comments[index].text = redactCommentElement[0].value;\n\n                    deleteApiComments(comments[index].id, token).then(() => {\n                        getComments();\n                    });\n\n                    answerApiComments({\n                        text: sanitizeHtml(comments[index].text),\n                        token,\n                    })\n                        .then(() => {})\n                        .then(() => {\n                            getComments();\n                            renderComments();\n                        });\n                    renderComments();\n                }\n            }\n        });\n    });\n};\n\nfunction counterLikes() {\n    const likesButtonElements = document.querySelectorAll('.like-button');\n\n    likesButtonElements.forEach((likesButtonElement) => {\n        likesButtonElement.addEventListener('click', (event) => {\n            event.stopPropagation();\n            const index = parseInt(\n                (likesButtonElement as HTMLElement).dataset.index ?? '',\n            );\n            const commentId = comments[index].id;\n            addLike(token, commentId).then(() => {\n                return getComments();\n            });\n        });\n    });\n}\n\nconst renderForm = (isLoading: boolean) => {\n    const formWindow = document.querySelector('.add-form');\n    const loaderText = document.getElementById('form-loading');\n    if (loaderText && formWindow) {\n        if (isLoading) {\n            loaderText.classList.remove('hidden');\n            formWindow.classList.add('hidden');\n        } else {\n            loaderText.classList.add('hidden');\n            formWindow.classList.remove('hidden');\n        }\n    }\n};\n"],"names":[],"sourceRoot":""}